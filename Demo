âœ… Perfect. To keep things simple for your demo, weâ€™ll make every stage just write:

âœ… Stage passed for the following SAS files:
 - sample.sas

â€¦into its *_passed.txt.

We wonâ€™t bother dynamically listing real .sas files. This way, you get dummy logs that look clean and predictable for your CICD pipeline testing.


---

ğŸ“ Updated Scripts (write only sample.sas in *_passed.txt)


---

âœ… 1. Lint_sas.py

# Lint_sas.py
import os

log_dir = os.environ.get("CURRENT_LOG_PATH", "./logs")
os.makedirs(log_dir, exist_ok=True)

passed_file = os.path.join(log_dir, "lint_passed.txt")
failed_file = os.path.join(log_dir, "lint_failed.txt")

try:
    print("ğŸ§¹ Simulating linting of SAS files...")
    with open(passed_file, "w") as f:
        f.write("âœ… Lint check passed for the following SAS files:\n")
        f.write(" - sample.sas\n")
    if os.path.exists(failed_file):
        os.remove(failed_file)
    print("âœ… Linting completed. Wrote to lint_passed.txt")
except Exception as e:
    with open(failed_file, "w") as f:
        f.write(f"âŒ Lint check failed: {e}\n")
    if os.path.exists(passed_file):
        os.remove(passed_file)
    print("âŒ Linting failed.")
    exit(1)


---

âœ… 2. Convert_sas.py

# Convert_sas.py
import os

log_dir = os.environ.get("CURRENT_LOG_PATH", "./logs")
os.makedirs(log_dir, exist_ok=True)

passed_file = os.path.join(log_dir, "convert_passed.txt")
failed_file = os.path.join(log_dir, "convert_failed.txt")

# Check previous stage
lint_passed = os.path.join(log_dir, "lint_passed.txt")
if not os.path.exists(lint_passed):
    print("âŒ Previous stage (lint) failed or not run. Exiting.")
    with open(failed_file, "w") as f:
        f.write("âŒ Conversion skipped because lint failed.\n")
    if os.path.exists(passed_file):
        os.remove(passed_file)
    exit(1)

try:
    print("ğŸ”„ Simulating conversion of SAS files...")
    with open(passed_file, "w") as f:
        f.write("âœ… Conversion passed for the following SAS files:\n")
        f.write(" - sample.sas\n")
    if os.path.exists(failed_file):
        os.remove(failed_file)
    print("âœ… Conversion completed. Wrote to convert_passed.txt")
except Exception as e:
    with open(failed_file, "w") as f:
        f.write(f"âŒ Conversion failed: {e}\n")
    if os.path.exists(passed_file):
        os.remove(passed_file)
    print("âŒ Conversion failed.")
    exit(1)


---

âœ… 3. run_sas.sh

#!/bin/bash

echo "ğŸš€ Simulating SAS program execution..."

# Paths
LOG_DIR="${CURRENT_LOG_PATH:-./logs}"
PASSED_FILE="$LOG_DIR/run_passed.txt"
FAILED_FILE="$LOG_DIR/run_failed.txt"
PREV_PASSED_FILE="$LOG_DIR/convert_passed.txt"

mkdir -p "$LOG_DIR"

# Check previous stage
if [ ! -f "$PREV_PASSED_FILE" ]; then
    echo "âŒ Previous stage (convert) failed or not run. Exiting."
    echo "âŒ Run stage skipped because convert failed." > "$FAILED_FILE"
    [ -f "$PASSED_FILE" ] && rm "$PASSED_FILE"
    exit 1
fi

# Simulate success
echo "âœ… SAS run simulation completed for the following SAS files:" > "$PASSED_FILE"
echo " - sample.sas" >> "$PASSED_FILE"

[ -f "$FAILED_FILE" ] && rm "$FAILED_FILE"
echo "âœ… Dummy SAS run successful. Log saved to $PASSED_FILE"


---

âœ… 4. Compare_outputs.py

# Compare_outputs.py
import os

log_dir = os.environ.get("CURRENT_LOG_PATH", "./logs")
os.makedirs(log_dir, exist_ok=True)

passed_file = os.path.join(log_dir, "compare_passed.txt")
failed_file = os.path.join(log_dir, "compare_failed.txt")

# Check previous stage
run_passed = os.path.join(log_dir, "run_passed.txt")
if not os.path.exists(run_passed):
    print("âŒ Previous stage (run) failed or not run. Exiting.")
    with open(failed_file, "w") as f:
        f.write("âŒ Comparison skipped because run failed.\n")
    if os.path.exists(passed_file):
        os.remove(passed_file)
    exit(1)

try:
    print("ğŸ§ª Simulating comparison of outputs...")
    with open(passed_file, "w") as f:
        f.write("âœ… Comparison passed for the following SAS files:\n")
        f.write(" - sample.sas\n")
    if os.path.exists(failed_file):
        os.remove(failed_file)
    print("âœ… Comparison completed. Wrote to compare_passed.txt")
except Exception as e:
    with open(failed_file, "w") as f:
        f.write(f"âŒ Comparison failed: {e}\n")
    if os.path.exists(passed_file):
        os.remove(passed_file)
    print("âŒ Comparison failed.")
    exit(1)


---

ğŸš€ What happens now?

Each stage always writes sample.sas into its *_passed.txt.

You can see sample.sas in lint_passed.txt, convert_passed.txt, run_passed.txt, and compare_passed.txt.

Pipeline stages still respect dependencies (each stage checks the previous oneâ€™s *_passed.txt).



---
